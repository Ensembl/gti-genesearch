<h1><code>/query</code></h1>

<h2>Example queries</h2>

<p>Find all genes called BRCA2 in any genome:
<code>
<a href="api/genes/query?query={"name":"BRCA2"}">api/genes/query?query={"name":"BRCA2"}</a>
</code></p>

<p>To restrict to a given genome:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}</a>
</code></p>

<p>To restrict to a results except in the given genome:
<code>
<a href="api/genes/query?query={"name":"BRCA2","!genome":"homo_sapiens"}">api/genes/query?query={"name":"BRCA2","!genome":"homo_sapiens"}</a>
</code></p>

<p>To restrict to a given taxonomic lineage (40674 is Mammalia):
<code>
<a href="api/genes/query?query={"name":"BRCA2","lineage":"40674"}">api/genes/query?query={"name":"BRCA2","lineage":"40674"}</a>
</code></p>

<p>To find genes annotated with GO terms that are the children of a given term use the GO_expanded field:
<code>
<a href="api/genes/query?query={"GO_expanded":"GO:0016787"}">api/genes/query?query={"GO_expanded":"GO:0016787"}</a>
</code></p>

<p>To find specific GO term annotation (double-stranded break repair with mutant phenotype evidence):
<code>
<a href="api/genes/query?query={"GO":{"evidence":"IMP","term":"GO:0006302"}}">api/genes/query?query={"GO":{"evidence":"IMP","term":"GO:0006302"}}</a>
</code></p>

<p>To find genes with a particular PHI-base annotation (reduced virulence in wheat)
<code>
<a href="api/genes/query?query={"PHI":{"host":"4565","phenotype":"reduced virulence"}}">api/genes/query?query={"PHI":{"host":"4565","phenotype":"reduced virulence"}}</a>
</code></p>

<p>To find genes with a particular UniProt cross-reference:
<code>
<a href="api/genes/query?query={"Uniprot/SWISSPROT":["P03886"]}">api/genes/query?query={"Uniprot/SWISSPROT":["P03886"]}</a>
</code></p>

<p>To find genes matching any of a list of UniProt records:
<code>
<a href="api/genes/query?query={"Uniprot/SWISSPROT":["P03886","P03891","P00395","P00403","P03928"]}">api/genes/query?query={"Uniprot/SWISSPROT":["P03886","P03891","P00395","P00403","P03928"]}</a>
</code></p>

<p>To find genes matching with different values of a number such as a start position:
<code>
<a href="api/genes/query?query={"genome":"homo_sapiens", "start":"45000-46000"}">api/genes/query?query={"genome":"homo_sapiens", "start":"45000-46000"}</a>
<a href="api/genes/query?query={"genome":"homo_sapiens", "start":"&gt;45000"}">api/genes/query?query={"genome":"homo_sapiens", "start":"&gt;45000"}</a>
<a href="api/genes/query?query={"genome":"homo_sapiens", "start":"&lt;=45000"}">api/genes/query?query={"genome":"homo_sapiens", "start":"&lt;=45000"}</a>
</code></p>

<p>To find genes in a given location or locations:
<code>
<a href="api/genes/query?query={"genome":"homo_sapiens", "location":"1:45000-96000"}">api/genes/query?query={"genome":"homo_sapiens", "location":"1:45000-96000"}</a>
<a href="api/genes/query?query={"genome":"homo_sapiens", "location":"1:45000-96000:-1"}">api/genes/query?query={"genome":"homo_sapiens", "location":"1:45000-96000:-1"}</a>
<a href="api/genes/query?query={"genome":"homo_sapiens", "location":["1:45000-52000","1:60000-96000"]}">api/genes/query?query={"genome":"homo_sapiens", "location":["1:45000-52000","1:60000-96000"]}</a>
</code></p>

<h2>Controlling output</h2>

<p>Adding different fields:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&fields=genome,name,description,start,end">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&amp;fields=genome,name,description,start,end</a>
</code></p>

<p>Returning results as a 2D array:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&array=true&fields=genome,name,description,start,end">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&amp;array=true&amp;fields=genome,name,description,start,end</a>
</code></p>

<p>Adding fields from a sub-object:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&fields=genome,name,description,start,end,transcripts.name,transcripts.biotype">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&amp;fields=genome,name,description,start,end,transcripts.name,transcripts.biotype</a>
</code></p>

<p>Adding all fields:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&fields=*">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&amp;fields=*</a>
</code></p>

<h2>Joining other data types</h2>

<p>Joining to homologues:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&fields=["name","description",{"homologues":["division","name"]}]">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&amp;fields=["name","description",{"homologues":["division","name"]}]</a>
</code></p>

<p>Joining to homologues and restricting further to just primates:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens","homologues":{"lineage":"9443"}}&fields=["name","description",{"homologues":["division","name"]}]">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens","homologues":{"lineage":"9443"}}&amp;fields=["name","description",{"homologues":["division","name"]}]</a>
</code></p>

<p>Joining to variants:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&fields=["name","description",{"variants":["id","chr","start","stop"]}]">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&amp;fields=["name","description",{"variants":["id","chr","start","stop"]}]</a>
</code></p>

<p>Joining to variants and showing only genes with variants:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens","variants":{"inner":1}}&fields=["name","description",{"variants":["id","chr","start","stop"]}]">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens","variants":{"inner":1}}&amp;fields=["name","description",{"variants":["id","chr","start","stop"]}]</a>
</code></p>

<p>Joining to variants and showing counts only:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&fields=["name","description",{"variants":["count"]}]">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&amp;fields=["name","description",{"variants":["count"]}]</a>
</code></p>

<p>Joining to variants with given SO term:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens","variants":{"annot":{"ct":{"so":"1627"}}}}&fields=["name","description",{"variants":["id","chr","start","stop"]}]">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens","variants":{"annot":{"ct":{"so":"1627"}}}}&amp;fields=["name","description",{"variants":["id","chr","start","stop"]}]</a>
</code></p>

<p>Joining to expression data:
<code>
<a href="api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&fields=["name","description",{"expression":["experimentType","expressionLevel"]}]">api/genes/query?query={"name":"BRCA2","genome":"homo_sapiens"}&amp;fields=["name","description",{"expression":["experimentType","expressionLevel"]}]</a>
</code></p>

<h2>Faceting</h2>

<p>To facet by genome:
<code>
<a href="api/genes/query?query={"name":"BRCA2"}&facets=genome">api/genes/query?query={"name":"BRCA2"}&amp;facets=genome</a>
</code></p>

<p>To facet by genome and biotype:
<code>
<a href="api/genes/query?query={"name":"BRCA2"}&facets=genome">api/genes/query?query={"name":"BRCA2"}&amp;facets=genome</a>
</code></p>

<h2>Sorting</h2>

<p>To sort by genome:
<code>
<a href="api/genes/query?query={"GO_expanded":"GO:0006302"}&fields=genome,name,start,end&sort=genome">api/genes/query?query={"GO_expanded":"GO:0006302"}&fields=genome,name,start,end&amp;sort=genome</a>
</code></p>

<p>To facet by genome and start:
<code>
<a href="api/genes/query?query={"GO_expanded":"GO:0006302"}&fields=genome,name,start,end&sort=genome,start">api/genes/query?query={"GO_expanded":"GO:0006302"}&fields=genome,name,start,end&amp;sort=genome,start</a>
</code></p>

<p>To facet by genome and start (descending):
<code>
<a href="api/genes/query?query={"GO_expanded":"GO:0006302"}&fields=genome,name,start,end&sort=genome,-start">api/genes/query?query={"GO_expanded":"GO:0006302"}&amp;fields=genome,name,start,end&amp;sort=genome,-start</a>
</code></p>

<h2>Pagination</h2>

<p>To show the first 10 entries:
<code>
<a href="api/genes/query?query={"name":"BRCA2","lineage":"40674"}&limit=10">api/genes/query?query={"name":"BRCA2","lineage":"40674"}&amp;limit=10</a>
</code></p>

<p>To show the next 10 entries:
<code>
<a href="api/genes/query?query={"name":"BRCA2","lineage":"40674"}&limit=10&offset=10">api/genes/query?query={"name":"BRCA2","lineage":"40674"}&amp;limit=10&amp;offset=10</a>
</code></p>

<p>NB: Performance is poor for very deep pagination - please use <code>/fetch</code> instead!</p>

<h1><code>/fetch</code></h1>

<p>Retrieving all results as JSON:
<code>
<a href="api/genes/fetch?query={"name":"BRCA2"}">api/genes/fetch?query={"name":"BRCA2"}</a>
</code></p>

<p>Changing fields:
<code>
<a href="api/genes/fetch?query={"name":"BRCA2"}&fields=genome,name,description,start,end">api/genes/fetch?query={"name":"BRCA2"}&amp;fields=genome,name,description,start,end</a>
</code></p>

<p>Returning results as a 2D array:
<code>
<a href="api/genes/fetch?query={"name":"BRCA2","genome":"homo_sapiens"}&array=true&amp;fields=genome,name,description,start,end">api/genes/fetch?query={"name":"BRCA2","genome":"homo_sapiens"}&array=true&amp;fields=genome,name,description,start,end</a>
</code></p>

<p>Retrieving all fields:
<code>
<a href="api/genes/query?query={"name":"BRCA2"}&fields=*">api/genes/query?query={"name":"BRCA2"}&amp;fields=*</a>
</code></p>

<p>Retrieving all results as XML (or pass the <code>Accept</code> properly as a request header):
<code>
<a href="api/genes/fetch?query={"name":"BRCA2"}&accept=application/xml">api/genes/fetch?query={"name":"BRCA2"}&amp;accept=application/xml</a>
</code></p>

<p>Retrieving all results as CSV (or pass the <code>Accept</code> properly as a request header):
<code>
<a href="api/genes/fetch?query={"name":"BRCA2"}&accept=text/csv">api/genes/fetch?query={"name":"BRCA2"}&amp;accept=text/csv</a>
</code></p>

<p>Retrieving genomic sequences for all results:
<code>
<a href="api/genes/fetch?query={"name":"BRCA2"}&fields=[{"sequences":[]}]">api/genes/fetch?query={"name":"BRCA2"}&amp;fields=[{"sequences":[]}]</a>
</code></p>

<p>Retrieving genomic sequences for all results with additional 100bp:
<code>
<a href="api/genes/fetch?query={"name":"BRCA2","sequences":{"expand3_prime":"100","expand5_prime":"100}}&fields=[{"sequences":[]}]">api/genes/fetch?query={"name":"BRCA2","sequences":{"expand3_prime":"100","expand5_prime":"100}}&amp;fields=[{"sequences":[]}]</a>
</code></p>

<p>Retrieving CDS sequences for all results:
<code>
<a href="api/genes/fetch?query={"name":"BRCA2","sequences":{"type":"cds"}}&fields=[{"sequences":[]}]">api/genes/fetch?query={"name":"BRCA2","sequences":{"type":"cds"}}&amp;fields=[{"sequences":[]}]</a>
</code></p>

<p>Retrieving protein sequences for all results:
<code>
<a href="api/genes/fetch?query={"name":"BRCA2","sequences":{"type":"protein"}}&fields=[{"sequences":[]}]">api/genes/fetch?query={"name":"BRCA2","sequences":{"type":"protein"}}&amp;fields=[{"sequences":[]}]</a>
</code></p>
